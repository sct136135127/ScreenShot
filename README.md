JAVA大作业实验报告
====
###### 孙楚涛 161220112 1050405528@qq.com 

----------------

# 总述介绍
        为了尽量还原葫芦娃的实战场景，在尊守物理原理的前提下，我设计了这个大作业。

### 初始化界面：

![](https://github.com/sct136135127/ScreenShot/blob/master/space.png)

        该界面包括葫芦娃、爷爷、蛇精、士兵、蝎子精以及路障，整体看起来像个棋盘，背景是葫芦山
        
        葫芦娃在左边摆出了长蛇型，爷爷在一旁加油助威，右边是由士兵、蝎子精和蛇精构成的锋矢型阵型。

-----
## 各个人物的设计如下：
### 正义阵容：
        `大娃`：攻击力 2 攻击范围 1 上下左右 血量 4 被攻击打中概率75%
        （大娃力大无穷，攻击力与血量相对提高）
        
        `二娃`：攻击力 1 攻击范围 3 必中 九宫格 血量 3 被攻击打中概率50%
        （二娃有火眼金睛，能够看穿敌人的弱点，千里眼帮助他增加射程）
        
        `三娃`：攻击力 1 攻击范围 1 上下左右 血量 5 被攻击打中概率 75%
        （三娃有金刚不坏之身，血量相对提高更多）
        
        `四娃`：技能：燃烧 30%概率发动 随机 2 扣 1 血量 3 被攻击打中概率 50%
        （四娃的三味真火能够造成范围的伤害）
        
        `五娃`：技能：水淹 30% 随机 1 扣 2 血量 3 被攻击打中概率 50%
        （五娃的水淹能够对单体造成高额伤害）
        
        `六娃`：攻击 1 攻击范围 1 九宫格 血量 3 被攻击打中概率20%
        （六娃拥有隐身技能，闪避率有了极大的提高，属于刺客类型，攻击范围也有修正）
        
        `七娃`：技能：吸收 概率10% 秒杀 血量 3 被攻击打中概率 50%
        （七娃的葫芦可以吸收天地万物，他有一定概率出发技能将地方一员大将收入葫芦之中）
        
        `老爷爷`：技能：回血 随机2 回1 血量 3 被攻击打中概率 75%
        （老爷爷对葫芦娃的爱意能够使葫芦娃们更加振奋，血量得到提高）

##### 反派阵容：
        `蛇精`：技能：如意攻击 发动概率 45% 随机3 扣2 血量 5 被攻击打中概率 50%
        （蛇精通过如意对对方造成群体攻击和高额伤害，BOSS中战斗力最高）
        
        `蝎子精`：攻击力 2 攻击范围 1 攻击两个 9宫格 血量 7 被攻击打中概率 50%
        （蝎子精的大刀拥有巨额攻击力，向周围挥刀甚至能够触发连击，同时拥有更多的血量）
        
        `喽啰`：攻击力 1 攻击范围 1 上下左右攻击 血量 3 被攻击打中概率 75%
        （喽啰敢死队数量巨大，达到11个，能够为BOSS挡下大多伤害，为蛇精和蝎子精创造输出空间）

------
## 界面介绍：
        左上角option工具栏有初始化、开始和打开文件功能
        
        初始化会将阵型进行初始化，可以用这个功能来改变小山的位置（随机）
        
        开始功能即让双方开战
        
        打开文件功能能在对战结束之后或之前选择加载txt文件，并自动开始复盘
        
        在界面上按空格（SPACE）键会立即初始化并开始对战
        
        在对战结束前或之后按L键能够出现打开文件界面，即实现打开文件的功能
       
----------
## 面向对象程序设计：
![](https://github.com/sct136135127/ScreenShot/blob/master/file.png)

        Application包内实现的是以JAVAFX为框架的图形界面设计
        Project3包为第三次实验移植过来的

其中creature包存放为
![](https://github.com/sct136135127/ScreenShot/blob/master/class.png)

        `Creature生物类`：
            在Creature 类中存放了 当前血量、满血量、对象标志、攻击力、被命中概率 阵营和存活标志信息，以及站立、攻击、被攻击、死亡的图像位置信息。同时creature 类继承了Runnable线程接口。
            
            show函数：将该对象放入棋盘
            dead函数：生物死亡
            suffer函数：生物受伤
            recover函数：回血
            beattackflash函数：被攻击动画
            ttackflash：攻击动画
            action函数：置与线程的run函数中用于行动，具体内容在子类中会重写。
            Run函数：线程运行函数，以正反双方的数量进行循环判断，有一方到0就终止，内部以alive存活判断条件辅助以每个对象都已标记的num，作为是否行动的判断，保证正反阵营轮流行动，而行动的顺序是随机的，这样又添加了一种意想不到的可能性。


        `Special creature类`为进行物理攻击的单位的类：
            Action函数：行为函数，先判断是否进行了物理攻击，如果没有则移动
            Findenemy函数配合move函数：往敌对阵营方向移动
            Judgeattack和attack函数配合用来判断是否攻击，attack被子类重写（因为各个类的攻击行为方式不同）
            Actionattack和move函数单独写出来用于复盘时直接对对象发出指令。


        `Support creature类`为进行魔法攻击的单位的类：
            Judgeattack与judgerecover函数用于判断是否释放技能，一个判断敌对，一个判断己方。
            魔法攻击的单位并不需要施法距离，所以无需移动函数，actionskill同actionattack函数，用于复盘时直接发出指令，actionskill在各个子类重写。

其他文件内容关系：
![](https://github.com/sct136135127/ScreenShot/blob/master/class2.png)

        `Main类`为遗留类，里面设计了一个Constant接口用于存放各种常量，例如图片地址

        `FileControler类`用于读取和存储文件，里面有recorder容器会在每次action时存储string信息：
            Move函数： classname move x y
            攻击与技能函数：classname attack x y
            特殊情况：针对喽啰
            Move函数： classname num move x y
            攻击与技能函数：classname num attack x y

        `Filecontroler类`同时继承了线程的接口，run函数判断是否在战斗，在战斗之后会存储内容到txt文件

        `Analyser类`继承了线程接口，用于读文件时解析指令和发出指令并更新UI界面

        `Barrier类`为障碍物类，生成的对象即为不能做任何action的小山

        `ObjPlace类`为物体类，生物和障碍物都继承这个类。
            ObjPlace类包含了更普遍的信息变量：坐标，名字，障碍物标志，ImageView用于存放图像。

        `Formation`存放了枚举类，用来初始化士兵的坐标。        

        `Space`为棋盘类，其功能十分关键：
            首先定义了存储棋盘对象的二维数组：Objplace space[][]
            Goodguys，badguys用于记录双方阵营存活数量
            之后定义了各个人物的对象，以及用容器存入了喽啰对象。
            Add_soldier函数用于初始化喽啰
            其他函数用于初始化和清空棋盘
            Start函数建立多线程并开始运行
        
## 一番大战之后：
![](https://github.com/sct136135127/ScreenShot/blob/master/end.png)

        蛇精靠着如意宝贝战斗到了最后，但她身边空无一人，战争的结果也会是这样。


PS：中间可能会由于双方都在判定技能是否释放而出现的静止状态，请耐心等待

------------
## 反思：
        作业难度整体不大，但自己开始比较晚，刚体会到设计游戏乐趣却到了要提交的时间，图片内容可以再放大点，游戏还可以设计的更好，比如动作反馈，被灼烧的时候出现火之类的。

        自己对于范型的掌握与测试还不够，用的时候会要想好久，对这方面知识的理解有但在应用上出现了问题。

        代码整体风格在最后写的时候比较赶，可读性会相对较差。
        
        以后一定不拖延！

# 至此，感谢
